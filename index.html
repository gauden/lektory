<!doctype html>
<meta charset="utf-8">
<link rel="stylesheet" href="./static/style.css">
<title>Deploying Lektor â€” Lektory</title>
<body>
  <header>
    <h1>Lektory</h1>
    <nav>
      <ul class="nav navbar-nav">
        <li class="active"><a href="./">Welcome</a></li>
        
          <li><a href="./blog/">Blog</a></li>
        
          <li><a href="./projects/">Projects</a></li>
        
          <li><a href="./about/">About</a></li>
        
      </ul>
    </nav>
  </header>
  <div class="page">
    
  <h2>Deploying Lektor</h2>
  <p>This is a skeleton Lektor website to be used as the starting point for building and deploying more complex sites. It is based on <a href="https://www.getlektor.com/">Lektor 3.0.1</a> (the latest version at the time of writing) and Python 2.7 (for reasons explained below), served on <a href="https://pages.github.com/">Github Pages</a>, and automatically deployed via <a href="https://travis-ci.org/">Travis-CI</a>.</p>
<p>The use of Python 2.7 goes against current trends and indeed against the recommendation of the Lektor documentation itself. But Python 3.5 fails to deploy when using Travis, and it only succeeded after reverting to Python 2.7.</p>
<p>In particular, the following changes were needed to the settings suggested in the documentation.</p>
<h3>Contents of <code>.travis.yml</code></h3>
<pre><code>language: python
python: 2.7
install: "pip install Lektor"
script: "lektor build"
deploy:
  provider: script
  script: "lektor deploy ghpages-https"
cache:
  directories:
    - $HOME/.cache/pip
    - $HOME/.cache/lektor/builds
</code></pre>
<h3>Contents of <code>Lektory.lektorproject</code></h3>
<pre><code>[project]
name = Lektory

[servers.ghpages-https]
target = ghpages+https://gauden/lektory
</code></pre>
<p>The discussion on <a href="https://github.com/lektor/lektor/issues/418">this bug</a> on the Lektor development repo and <a href="https://stackoverflow.com/a/38216821/1290420">this answer</a> on StackOverflow helped in my solution. Neither of them worked without the configuration changes above.</p>


  </div>
  <footer>
    <div class="license"><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.</div>
    <p>Written by Gauden Galea.
Built with <a href="https://www.getlektor.com/">Lektor</a>,
<a href="https://www.python.org/">Python</a>,
<a href="https://pages.github.com/">Github Pages</a>, and
<a href="https://travis-ci.org/">Travis-CI</a>.
Fork on <a href="https://github.com/gauden/lektory">Github</a>.</p>
  </footer>
</body>
